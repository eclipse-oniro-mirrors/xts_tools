/**
 * Copyright (c) 2025 Shenzhen Kaihong Digital Industry Development Co., Ltd.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@Entry
@Component
struct Sr20241230845510002 {
  @State animationAngle: number = 0;
  @State animationScale: number = 1.0;
  @State animationOpacity: number = 1.0;
  @State isAnimationRunning: boolean = false;
  private animationTimer: number = -1;

  aboutToAppear(): void {
    // é¡µé¢åŠ è½½æ—¶å¯åŠ¨åŠ¨æ•ˆ
    this.startAnimation();
  }

  aboutToDisappear(): void {
    // é¡µé¢é”€æ¯æ—¶æ¸…ç†å®šæ—¶å™¨
    this.stopAnimation();
  }

  // å¯åŠ¨åŠ¨æ•ˆ
  startAnimation(): void {
    if (!this.isAnimationRunning) {
      this.isAnimationRunning = true;
      console.log('[Animation] Symbol animation started - åŠ¨æ•ˆå¯åŠ¨');
      
      this.animationTimer = setInterval(() => {
        this.animationAngle = (this.animationAngle + 10) % 360;
        this.animationScale = 1.0 + 0.2 * Math.sin(this.animationAngle * Math.PI / 180);
        this.animationOpacity = 0.7 + 0.3 * Math.cos(this.animationAngle * Math.PI / 180);
      }, 50);
    }
  }

  // åœæ­¢åŠ¨æ•ˆ
  stopAnimation(): void {
    if (this.isAnimationRunning) {
      this.isAnimationRunning = false;
      console.log('[Animation] Symbol animation stopped - åŠ¨æ•ˆåœæ­¢');
      
      if (this.animationTimer !== -1) {
        clearInterval(this.animationTimer);
        this.animationTimer = -1;
      }
      
      // é‡ç½®åŠ¨æ•ˆçŠ¶æ€
      this.animationAngle = 0;
      this.animationScale = 1.0;
      this.animationOpacity = 1.0;
    }
  }

  build() {
    Scroll() {
      Column() {
        // é¡¶éƒ¨å ä½åŒºåŸŸ
        Column() {
          Text('æµ‹è¯•ä¸Šä¸‹æ»‘åŠ¨é¡µé¢')
            .fontSize(24)
            .fontWeight(FontWeight.Bold)
            .margin({ top: 30, bottom: 20 })
            .id('text_title_sr20241230845510_002')

          Text('è§‚å¯Ÿsymbolå›¾æ ‡åŠ¨æ•ˆå¯åœæœºåˆ¶')
            .fontSize(16)
            .fontColor(Color.Gray)
            .margin({ bottom: 30 })
            .id('text_subtitle_sr20241230845510_002')

          // å¡«å……å†…å®¹ï¼Œä½¿é¡µé¢å¯ä»¥æ»šåŠ¨
          ForEach([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], (index: number) => {
            Row() {
              Text(`æ»‘åŠ¨å†…å®¹åŒºåŸŸ ${index + 1}`)
                .fontSize(18)
                .fontWeight(FontWeight.Medium)
              
              Blank()
              
              Text(`Item ${index + 1}`)
                .fontSize(14)
                .fontColor(Color.Blue)
            }
            .width('90%')
            .height(60)
            .padding({ left: 20, right: 20 })
            .backgroundColor('#F8F9FA')
            .borderRadius(8)
            .margin({ bottom: 10 })
            .id(`content_item_${index}_sr20241230845510_002`)
          })
        }
        .width('100%')
        .padding({ left: 16, right: 16 })

        // Symbolå›¾æ ‡åŠ¨æ•ˆåŒºåŸŸ
        Column() {
          Text('SymbolåŠ¨æ•ˆåŒºåŸŸ')
            .fontSize(20)
            .fontWeight(FontWeight.Bold)
            .margin({ top: 40, bottom: 30 })
            .id('text_animation_title_sr20241230845510_002')

          // Symbolå›¾æ ‡å®¹å™¨
          Row() {
            // æ—‹è½¬åŠ¨æ•ˆSymbol
            Column() {
              Text('ğŸ”„')
                .fontSize(48)
                .rotate({ angle: this.animationAngle })
                .animation({
                  duration: 50,
                  curve: Curve.Linear
                })
              
              Text('æ—‹è½¬åŠ¨æ•ˆ')
                .fontSize(12)
                .margin({ top: 10 })
            }
            .margin({ right: 30 })

            // ç¼©æ”¾åŠ¨æ•ˆSymbol
            Column() {
              Text('â­')
                .fontSize(48)
                .scale({ x: this.animationScale, y: this.animationScale })
                .animation({
                  duration: 50,
                  curve: Curve.EaseInOut
                })
              
              Text('ç¼©æ”¾åŠ¨æ•ˆ')
                .fontSize(12)
                .margin({ top: 10 })
            }
            .margin({ right: 30 })

            // é€æ˜åº¦åŠ¨æ•ˆSymbol
            Column() {
              Text('ğŸ’«')
                .fontSize(48)
                .opacity(this.animationOpacity)
                .animation({
                  duration: 50,
                  curve: Curve.EaseInOut
                })
              
              Text('é€æ˜åº¦åŠ¨æ•ˆ')
                .fontSize(12)
                .margin({ top: 10 })
            }
          }
          .justifyContent(FlexAlign.Center)
          .width('100%')
          .height(120)
          .backgroundColor('#E3F2FD')
          .borderRadius(16)
          .padding(20)
          .id('symbol_animation_container_sr20241230845510_002')

          // åŠ¨æ•ˆçŠ¶æ€æ˜¾ç¤º
          Text(`åŠ¨æ•ˆçŠ¶æ€: ${this.isAnimationRunning ? 'è¿è¡Œä¸­' : 'å·²åœæ­¢'}`)
            .fontSize(16)
            .fontColor(this.isAnimationRunning ? Color.Green : Color.Red)
            .margin({ top: 20 })
            .id('animation_status_sr20241230845510_002')

          // æ‰‹åŠ¨æ§åˆ¶æŒ‰é’®ï¼ˆç”¨äºæµ‹è¯•ï¼‰
          Row() {
            Button('å¯åŠ¨åŠ¨æ•ˆ')
              .id('button_start_animation_sr20241230845510_002')
              .fontSize(14)
              .width(100)
              .height(40)
              .margin({ right: 10 })
              .onClick(() => {
                this.startAnimation();
              })

            Button('åœæ­¢åŠ¨æ•ˆ')
              .id('button_stop_animation_sr20241230845510_002')
              .fontSize(14)
              .width(100)
              .height(40)
              .onClick(() => {
                this.stopAnimation();
              })
          }
          .margin({ top: 20 })
        }
        .width('100%')
        .padding({ left: 16, right: 16 })

        // åº•éƒ¨å ä½åŒºåŸŸ
        Column() {
          ForEach([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14], (index: number) => {
            Row() {
              Text(`åº•éƒ¨å†…å®¹åŒºåŸŸ ${index + 1}`)
                .fontSize(18)
                .fontWeight(FontWeight.Medium)
              
              Blank()
              
              Text(`Bottom ${index + 1}`)
                .fontSize(14)
                .fontColor(Color.Orange)
            }
            .width('90%')
            .height(60)
            .padding({ left: 20, right: 20 })
            .backgroundColor('#FFF3E0')
            .borderRadius(8)
            .margin({ bottom: 10 })
            .id(`bottom_item_${index}_sr20241230845510_002`)
          })
        }
        .width('100%')
        .padding({ left: 16, right: 16, top: 40, bottom: 40 })
      }
    }
    .id('scroll_container_sr20241230845510_002')
    .width('100%')
    .height('100%')
    .scrollBar(BarState.Auto)
    .onScrollFrameBegin((offset: number, state: ScrollState) => {
      // ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ ¹æ®Symbolå›¾æ ‡æ˜¯å¦å¯è§æ¥æ§åˆ¶åŠ¨æ•ˆ
      // è¿™é‡Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚æ·»åŠ å¯è§æ€§æ£€æµ‹é€»è¾‘
      console.log(`[Scroll] Scroll offset: ${offset}, state: ${state}`);
      return { offsetRemain: offset };
    })
  }
}
