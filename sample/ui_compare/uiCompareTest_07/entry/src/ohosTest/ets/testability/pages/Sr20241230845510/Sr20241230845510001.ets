/**
 * Copyright (c) 2025 Shenzhen Kaihong Digital Industry Development Co., Ltd.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@Entry
@Component
struct Sr20241230845510001 {
  @State currentPageIndex: number = 0;
  @State animationAngle: number = 0;
  @State animationScale: number = 1.0;
  @State animationOpacity: number = 1.0;
  @State isAnimationRunning: boolean = false;
  private animationTimer: number = -1;

  aboutToAppear(): void {
    // é¡µé¢åŠ è½½æ—¶å¯åŠ¨åŠ¨æ•ˆ
    console.log('[PageLifecycle] Symbol page aboutToAppear - é¡µé¢å³å°†å‡ºç°');
    this.startAnimation();
  }

  aboutToDisappear(): void {
    // é¡µé¢é”€æ¯æ—¶åœæ­¢åŠ¨æ•ˆ
    console.log('[PageLifecycle] Symbol page aboutToDisappear - é¡µé¢å³å°†æ¶ˆå¤±');
    this.stopAnimation();
  }

  onPageShow(): void {
    // é¡µé¢æ˜¾ç¤ºæ—¶å¯åŠ¨åŠ¨æ•ˆ
    console.log('[PageLifecycle] Symbol page onPageShow - é¡µé¢æ˜¾ç¤º');
    this.startAnimation();
  }

  onPageHide(): void {
    // é¡µé¢éšè—æ—¶åœæ­¢åŠ¨æ•ˆ
    console.log('[PageLifecycle] Symbol page onPageHide - é¡µé¢éšè—');
    this.stopAnimation();
  }

  // å¯åŠ¨åŠ¨æ•ˆ
  startAnimation(): void {
    if (!this.isAnimationRunning) {
      this.isAnimationRunning = true;
      console.log('[Animation] Symbol animation started - å¾ªç¯åŠ¨æ•ˆå¯åŠ¨');
      
      this.animationTimer = setInterval(() => {
        this.animationAngle = (this.animationAngle + 15) % 360;
        this.animationScale = 1.0 + 0.3 * Math.sin(this.animationAngle * Math.PI / 180);
        this.animationOpacity = 0.6 + 0.4 * Math.cos(this.animationAngle * Math.PI / 180);
      }, 80);
    }
  }

  // åœæ­¢åŠ¨æ•ˆ
  stopAnimation(): void {
    if (this.isAnimationRunning) {
      this.isAnimationRunning = false;
      console.log('[Animation] Symbol animation stopped - å¾ªç¯åŠ¨æ•ˆåœæ­¢');
      
      if (this.animationTimer !== -1) {
        clearInterval(this.animationTimer);
        this.animationTimer = -1;
      }
    }
  }

  // åˆ‡æ¢é¡µé¢
  switchPage(pageIndex: number): void {
    console.log(`[PageSwitch] Switching to page ${pageIndex} - åˆ‡æ¢åˆ°é¡µé¢${pageIndex}`);
    this.currentPageIndex = pageIndex;
    
    if (pageIndex === 0) {
      // å›åˆ°Symbolé¡µé¢ï¼Œå¯åŠ¨åŠ¨æ•ˆ
      this.startAnimation();
    } else {
      // åˆ‡æ¢åˆ°å…¶ä»–é¡µé¢ï¼Œåœæ­¢åŠ¨æ•ˆ
      this.stopAnimation();
    }
  }

  @Builder
  SymbolPage() {
    Column() {
      Text('Symbolé¡µé¢')
        .fontSize(28)
        .fontWeight(FontWeight.Bold)
        .margin({ top: 40, bottom: 30 })
        .id('text_symbol_title_sr20241230845510_001')

      Text('æµ‹è¯•é¡µé¢åˆ‡å±æ—¶symbolå›¾æ ‡å¾ªç¯åŠ¨æ•ˆå¯åœ')
        .fontSize(16)
        .fontColor(Color.Gray)
        .margin({ bottom: 40 })
        .textAlign(TextAlign.Center)
        .id('text_symbol_desc_sr20241230845510_001')

      // Symbolå›¾æ ‡åŠ¨æ•ˆåŒºåŸŸ
      Column() {
        Text('Symbolå¾ªç¯åŠ¨æ•ˆå±•ç¤º')
          .fontSize(20)
          .fontWeight(FontWeight.Medium)
          .margin({ bottom: 30 })
          .id('text_animation_title_sr20241230845510_001')

        // å¤šä¸ªSymbolå›¾æ ‡å±•ç¤ºå¾ªç¯åŠ¨æ•ˆ
        Row() {
          // æ—‹è½¬Symbol
          Column() {
            Text('ğŸ”„')
              .fontSize(60)
              .rotate({ angle: this.animationAngle })
              .animation({
                duration: 80,
                curve: Curve.Linear
              })
            
            Text('æ—‹è½¬å¾ªç¯')
              .fontSize(14)
              .margin({ top: 15 })
          }
          .margin({ right: 40 })

          // ç¼©æ”¾Symbol
          Column() {
            Text('ğŸ’«')
              .fontSize(60)
              .scale({ x: this.animationScale, y: this.animationScale })
              .animation({
                duration: 80,
                curve: Curve.EaseInOut
              })
            
            Text('ç¼©æ”¾å¾ªç¯')
              .fontSize(14)
              .margin({ top: 15 })
          }
          .margin({ right: 40 })

          // é€æ˜åº¦Symbol
          Column() {
            Text('âœ¨')
              .fontSize(60)
              .opacity(this.animationOpacity)
              .animation({
                duration: 80,
                curve: Curve.EaseInOut
              })
            
            Text('é€æ˜åº¦å¾ªç¯')
              .fontSize(14)
              .margin({ top: 15 })
          }
        }
        .justifyContent(FlexAlign.Center)
        .width('100%')
        .height(150)

        // ç»„åˆåŠ¨æ•ˆSymbol
        Row() {
          Text('ğŸŒŸ')
            .fontSize(80)
            .rotate({ angle: this.animationAngle })
            .scale({ x: this.animationScale, y: this.animationScale })
            .opacity(this.animationOpacity)
            .animation({
              duration: 80,
              curve: Curve.EaseInOut
            })
        }
        .justifyContent(FlexAlign.Center)
        .width('100%')
        .height(120)
        .margin({ top: 20 })
      }
      .width('90%')
      .padding(30)
      .backgroundColor('#E8F5E8')
      .borderRadius(20)
      .id('symbol_animation_area_sr20241230845510_001')

      // åŠ¨æ•ˆçŠ¶æ€æ˜¾ç¤º
      Text(`å¾ªç¯åŠ¨æ•ˆçŠ¶æ€: ${this.isAnimationRunning ? 'è¿è¡Œä¸­' : 'å·²åœæ­¢'}`)
        .fontSize(18)
        .fontColor(this.isAnimationRunning ? Color.Green : Color.Red)
        .fontWeight(FontWeight.Medium)
        .margin({ top: 30 })
        .id('animation_status_sr20241230845510_001')

      Blank()
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Start)
  }

  @Builder
  OtherPage() {
    Column() {
      Text('å…¶ä»–é¡µé¢')
        .fontSize(28)
        .fontWeight(FontWeight.Bold)
        .margin({ top: 40, bottom: 30 })
        .id('text_other_title_sr20241230845510_001')

      Text('è¿™æ˜¯ç”¨äºæµ‹è¯•åˆ‡å±çš„å…¶ä»–é¡µé¢')
        .fontSize(16)
        .fontColor(Color.Gray)
        .margin({ bottom: 40 })
        .id('text_other_desc_sr20241230845510_001')

      // å…¶ä»–é¡µé¢å†…å®¹
      Column() {
        Text('ğŸ“±')
          .fontSize(80)
          .margin({ bottom: 20 })

        Text('å½“å‰åœ¨å…¶ä»–é¡µé¢')
          .fontSize(20)
          .fontWeight(FontWeight.Medium)
          .margin({ bottom: 20 })

        Text('Symbolé¡µé¢çš„åŠ¨æ•ˆåº”è¯¥å·²åœæ­¢')
          .fontSize(16)
          .fontColor(Color.Orange)
          .textAlign(TextAlign.Center)
      }
      .width('90%')
      .padding(40)
      .backgroundColor('#FFF3E0')
      .borderRadius(20)
      .id('other_page_content_sr20241230845510_001')

      Blank()
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Start)
  }

  build() {
    Column() {
      // é¡µé¢åˆ‡æ¢å¯¼èˆª
      Row() {
        Button('Symbolé¡µé¢')
          .id('button_symbol_page_sr20241230845510_001')
          .fontSize(16)
          .width(120)
          .height(45)
          .backgroundColor(this.currentPageIndex === 0 ? Color.Blue : Color.Gray)
          .fontColor(Color.White)
          .margin({ right: 15 })
          .onClick(() => {
            this.switchPage(0);
          })

        Button('å…¶ä»–é¡µé¢')
          .id('button_other_page_sr20241230845510_001')
          .fontSize(16)
          .width(120)
          .height(45)
          .backgroundColor(this.currentPageIndex === 1 ? Color.Blue : Color.Gray)
          .fontColor(Color.White)
          .onClick(() => {
            this.switchPage(1);
          })
      }
      .width('100%')
      .justifyContent(FlexAlign.Center)
      .margin({ top: 20, bottom: 20 })
      .id('page_navigation_sr20241230845510_001')

      // é¡µé¢å†…å®¹åŒºåŸŸ
      if (this.currentPageIndex === 0) {
        this.SymbolPage()
      } else {
        this.OtherPage()
      }
    }
    .width('100%')
    .height('100%')
    .padding({ left: 16, right: 16 })
  }
}
