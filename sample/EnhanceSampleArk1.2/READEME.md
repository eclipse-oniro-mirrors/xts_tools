# ArkTS1.2迁移升级说明  


## 一、概述
核心目标是通过 **一键迁移工具辅助 + 有限手动修正**（手动修改占比严格控制在 5%–10%），实现工程完整运行。


## 二、升级步骤

### 1. 工程迁移与版本备份
- **拉取代码**：获取四个工程的代码。
- **自动迁移**：使用官方 **一键迁移工具** 执行 1.2 版本自动转换，生成初始迁移工程。
- **版本记录**：通过 `git` 提交迁移后代码（备注：`迁移工具初始输出 - Ark1.2`），固化迁移基线，便于后续对比追溯。


### 2. 迁移工具报错处理
- **收集报错**：运行迁移工具后，汇总所有报错信息（含语法错误、配置冲突、API 废弃等）。
- **分类处理**：
  - **可修复项**：直接修改代码修复（如路径配置更新、简单 API 替换）。
  - **疑难项**：整理报错场景（代码片段 + 报错日志），提交至 **迁移问题跟踪表**（同步工具团队或技术负责人）。


### 3. 报错修复与问题提单
- **优先修复明确报错**：确保迁移工具层面的错误全部解决，工程通过工具校验。
- **阻断性问题提单**：对于工具无法自动修复、手动修改困难的问题（如框架逻辑冲突），提交 **高优先级问题单**（标注 `迁移阻断`），协同解决。


### 4. 编译阶段 TypeError 修复
迁移后编译会触发 **类型不匹配（TypeError）** 问题，需手动修正（聚焦工具未覆盖场景）。
- **修复范围**：变量类型对齐、方法参数匹配、组件属性约束、异步逻辑类型定义等。
- **比例控制**：单工程手动修改量 **≤10%**（整体三个工程平均目标 ≤7%），通过注释标记手动修改点（如 `// 1.2迁移手动修复：类型对齐`）。


## 三、Sample 升级核心内容
1. **工具自动适配**：
   - ArkUI 1.2 API 替换（组件、接口升级）。
   - 工程配置文件（如依赖、清单）自动更新。
2. **手动修正焦点**：
   - 类型系统细化：修复 `number/string` 混淆、泛型约束问题；
   - 异步流程：调整 Promise、异步组件的类型定义；
   - 自定义逻辑：修正工具未覆盖的参数/返回值类型错误。


## 四、后续流程
1. **内部评审**：组织全流程评审（代码规范、功能运行、性能基线），验证升级效果。
2. **问题闭环**：评审问题回归至步骤 2-4 修复，直至满足可运行标准。
3. **仓库上传**：内部检视通过后，推送代码至目标仓库。

**关键原则**：过程中记录手动修改点，便于工具优化反馈，保障后续版本迁移效率。